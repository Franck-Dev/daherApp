<app-shared-user-header [page]="page"></app-shared-user-header>

<ion-content [fullscreen]="true">
    <mat-stepper linear #stepper class="">
        <mat-step label="Type de la demande" [editable]="requestTypeFormEditable">
            <form [formGroup]="requestTypeForm">
                <ion-segment formControlName="requestType">
                    <ion-segment-button [value]="requestTypeEnum.newTool">
                        <ion-label>SBO</ion-label>
                    </ion-segment-button>
                    <ion-segment-button [value]="requestTypeEnum.modifyAndMaintain">
                        <ion-label>Maintenance et Réparation</ion-label>
                    </ion-segment-button>
                    <ion-segment-button [value]="requestTypeEnum.tridimCheck">
                        <ion-label>Contrôle 3D</ion-label>
                    </ion-segment-button>
                </ion-segment>
                <ion-toolbar>
                    <ion-button (click)="setRequestTypeClick()" expand="block" fill="clear" shape="round">
                        Etape suivante
                    </ion-button>
                </ion-toolbar>
            </form>
        </mat-step>

        <mat-step label="L'outillage" [stepControl]="newToolForm" [editable]="newToolFormEditable">
            <form [formGroup]="newToolForm">
                <ion-item-group>
                    <ion-item-divider>
                        <ion-label>Définition de l'outillage</ion-label>
                    </ion-item-divider>
                    <ion-item>
                        <ion-label position="floating">Numéro d'OT SAP
                            <ion-text color="danger">*</ion-text>
                        </ion-label>
                        <ion-input required formControlName="sapToolNumber" type="text" placeholder="ex. OT095999"></ion-input>
                    </ion-item>
                    <ion-item>
                        <ion-label position="floating">Numéro d'identification
                            <ion-text color="danger">*</ion-text>
                        </ion-label>
                        <ion-input required formControlName="identification" type="text" placeholder="ex. 19900Z01-T700P5522000123"></ion-input>
                    </ion-item>
                    <ion-item>
                        <ion-label position="floating">Désignation
                            <ion-text color="danger">*</ion-text>
                        </ion-label>
                        <ion-input required formControlName="designation" type="text"></ion-input>
                    </ion-item>
                </ion-item-group>
                <ion-toolbar>
                    <ion-button (click)="createToolClick()" expand="block" fill="clear" shape="round">
                        Créer l'OT
                    </ion-button>
                </ion-toolbar>
            </form>
        </mat-step>
        <mat-step label="La demande" [stepControl]="newToolRequestForm" [editable]="true">
            <form [formGroup]="newToolRequestForm">
                <ion-item-group>
                    <ion-item-divider>
                        <ion-label>Descritpion de l'outillage</ion-label>
                    </ion-item-divider>

                    <ion-item>
                        <ion-label>Programme avion</ion-label>
                        <ion-select formControlName="aircraftProgram" multiple="true" placeholder="Sélectionner le programme avion">
                            <ion-select-option *ngFor="let program of programs" [value]="program.id">
                                {{program.Designation}}
                            </ion-select-option>
                        </ion-select>
                    </ion-item>
                    <ion-item>
                        <ion-label>Titre
                            <ion-text color="danger">*</ion-text>
                        </ion-label>
                        <ion-input required formControlName="title"></ion-input>
                    </ion-item>
                    <ion-item>
                        <ion-label>Description
                            <ion-text color="danger">*</ion-text>
                        </ion-label>
                        <div class="NgxEditor__Wrapper">
                            <ngx-editor-menu [editor]="editor"> </ngx-editor-menu>
                            <ngx-editor [editor]="editor" [ngModel]="html" formControlName="description" [disabled]="false" [placeholder]="'Taper la description ici'"></ngx-editor>
                        </div>
                    </ion-item>

                    <ion-item>
                        <ion-label>Date
                            <ion-text color="danger">*</ion-text>
                        </ion-label>
                        <ion-datetime display-format="DD.MM.YYYY HH:mm" formControlName="needDate"></ion-datetime>
                    </ion-item>
                </ion-item-group>
                <ion-button block color="primary" [disabled]="newToolRequestForm.invalid" (click)="createToolRequestClick()">
                    Créer la demande
                </ion-button>
            </form>
        </mat-step>
    </mat-stepper>
</ion-content>