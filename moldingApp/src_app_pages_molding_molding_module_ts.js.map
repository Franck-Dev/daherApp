{"version":3,"file":"src_app_pages_molding_molding_module_ts.js","mappings":"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","sources":["./src/app/_services/scan/scan.service.ts","./src/app/pages/molding/molding-routing.module.ts","./src/app/pages/molding/molding.module.ts","./src/app/pages/molding/molding.page.ts","./src/app/pages/molding/molding.page.html","./node_modules/ngx-webcam/fesm2020/ngx-webcam.mjs"],"sourcesContent":["import { Injectable } from '@angular/core';\nimport { Kit } from 'src/app/_interface/kit';\nimport { KitService } from '../kits/kit.service';\n\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ScanService {\n\n  public scanState: boolean;\n  constructor(private kitService: KitService) {\n  }\n\n  getScanInput(scanInputValue: string) {\n    return new Promise((resolve, reject) => {\n      this.kitService.getKitById(scanInputValue)\n        .then((kit: Kit) => {\n          resolve(kit);\n        },\n          () => {\n            reject();\n          }\n        );\n    });\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { MoldingPage } from './molding.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: MoldingPage\n  },\n  {\n    path: 'print-molding-sheet',\n    loadChildren: () => import('./print-molding-sheet/print-molding-sheet.module').then( m => m.PrintMoldingSheetPageModule)\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class MoldingPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\nimport { MoldingPageRoutingModule } from './molding-routing.module';\nimport { WebcamModule } from 'ngx-webcam';\nimport { MoldingPage } from './molding.page';\nimport { SharedUserHeaderModule } from 'src/app/composants/shared-user-header/shared-user-header.module';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    MoldingPageRoutingModule,\n    SharedUserHeaderModule,\n    WebcamModule,\n  ],\n  declarations: [MoldingPage]\n})\nexport class MoldingPageModule { }\n","import { AfterViewInit, Component, OnInit, ViewChild } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { AlertController, IonButton, IonInput, LoadingController, NavController, ToastController } from '@ionic/angular';\nimport { Kit } from 'src/app/_interface/kit';\nimport { Molding } from 'src/app/_interface/molding';\nimport { MoldingTool } from 'src/app/_interface/molding-tool';\nimport { KitService } from 'src/app/_services/kits/kit.service';\nimport { MoldingService } from 'src/app/_services/moldings/molding.service';\nimport { MoldingToolService } from 'src/app/_services/moldingTools/molding-tool.service';\nimport { ScanService } from 'src/app/_services/scan/scan.service';\nimport { AuthService } from 'src/app/_services/users/auth.service';\n\n@Component({\n  selector: 'app-molding',\n  templateUrl: './molding.page.html',\n  styleUrls: ['./molding.page.scss'],\n})\nexport class MoldingPage implements OnInit, AfterViewInit {\n  @ViewChild('scanInput') scanInput: IonInput;\n  @ViewChild('scanButton') scanButton: IonButton;\n\n  public pageTitle: string;\n  public scanButtonText: string;\n  public molding: Molding;\n\n  constructor(\n    public scanService: ScanService,\n    public moldingService: MoldingService,\n    public moldingToolService: MoldingToolService,\n    public alertController: AlertController,\n    public kitService: KitService,\n    public router: Router,\n    public navCtrl: NavController,\n    private loadingController: LoadingController,\n    private activatedRoute: ActivatedRoute,\n    private toastController: ToastController,\n    public authService: AuthService,\n  ) {\n    this.molding =\n    {\n      id: null,\n      kits: [],\n      moldingDay: new Date(),\n      outillage: null,\n      moldingUser: null\n    };\n\n    const id = this.activatedRoute.snapshot.paramMap.get('id');\n    if (id) {\n      this.pageTitle = 'Modification moulage';\n      this.loadMoldingData(id);\n    } else {\n      this.pageTitle = 'Nouveau moulage';\n    }\n  }\n\n  async loadMoldingData(moldingId: string) {\n    const loading = await this.loadingController.create({\n      cssClass: 'my-custom-class',\n      message: 'Patienter pendant le chargement du moulage',\n    });\n    this.moldingService.getMoldingById(moldingId)\n      .then((molding: Molding) => {\n        this.molding = molding;\n        this.moldingService.updateDates(this.molding);\n        this.molding.updatedAt = new Date();\n        console.log(this.molding);\n        loading.dismiss();\n      });\n  }\n\n  ngAfterViewInit(): void {\n    this.scanButtonText = 'SCAN INACTIF';\n    this.scanButton.color = 'danger';\n    this.scanService.scanState = false;\n  }\n\n  ngOnInit() {\n  }\n\n  associateToolClick() {\n    this.associateToolAlertPrompt();\n  }\n\n\n  async associateToolAlertPrompt() {\n    const alert = await this.alertController.create({\n      cssClass: 'my-custom-class',\n      header: 'Associer l\\'outillage de moulage',\n      inputs: [\n        {\n          name: 'toolNumber',\n          type: 'text',\n          placeholder: 'Scannez l\\'outillage',\n          tabindex: 1,\n          id: 'toolNumberInput',\n        }\n      ],\n      buttons: [\n        {\n          text: 'Annuler',\n          role: 'cancel',\n          cssClass: 'ion-color-secondary',\n          handler: (data) => {\n            console.log('Confirm Cancel', data);\n          }\n        }, {\n          text: 'Valider',\n          cssClass: ['ion-color-primary', 'button', 'button-solid'],\n          handler: (data) => {\n            this.setLinkedTool(data.toolNumber);\n          }\n        }\n      ]\n    });\n\n    await alert.present().then(() => {\n      const toolNumberInput = document.getElementById('toolNumberInput');\n      if (toolNumberInput) {\n        toolNumberInput.focus();\n      }\n    });\n  }\n\n\n  setLinkedTool(toolNumber: string) {\n    console.log(toolNumber);\n    this.moldingToolService.getToolByToolNumber(toolNumber)\n      .then((tool: MoldingTool) => {\n        this.molding.outillage = tool;\n        this.presentToast('Outillage associé !');\n      });\n  }\n\n  switchScanState() {\n    this.scanService.scanState = !this.scanService.scanState;\n    if (this.scanService.scanState) {\n      this.scanInput.setFocus();\n    }\n  }\n\n  inputOnBlur() {\n    this.scanButton.color = 'danger';\n    this.scanButtonText = 'SCAN INACTIF';\n    this.scanService.scanState = false;\n  }\n  inputOnFocus() {\n    this.scanButton.color = 'success';\n    this.scanButtonText = 'SCAN ACTIF';\n    this.scanService.scanState = true;\n  }\n\n\n  async scanInputAction() {\n    const loading = await this.loadingController.create({\n      cssClass: 'my-custom-class',\n      message: 'Patienter pendant le chargement du kit',\n    });\n    await loading.present();\n    this.scanService.getScanInput(this.scanInput.value.toString())\n      .then((kit: Kit) => {\n        if (!this.kitService.kitIsInKits(kit, this.molding.kits)) {\n          this.molding.kits.push(kit);\n          this.moldingService.updateDates(this.molding);\n          this.presentToast('Kit ajouté !');\n        } else {\n          this.presentToast('Le kit a déjà été scanné');\n          console.log('kit en doublon');\n        }\n      })\n      .catch(() => {\n        this.wrongKitInputAlert();\n        console.error('Le kit scanné ne semble pas être un kit');\n      })\n      .finally(() => {\n        this.scanInput.value = '';\n        loading.dismiss();\n      });\n    const { role, data } = await loading.onDidDismiss();\n    // console.log('Loading dismissed!');\n  }\n\n  removeKit(index: number) {\n    try {\n      this.molding.kits.splice(index, 1);\n      console.log(`Kit removed ${index}`);\n      this.moldingService.updateDates(this.molding);\n    } catch (error) {\n      console.error(error);\n    }\n  }\n\n  saveMoldingClick() {\n    this.saveMolding()\n      .then(() => {\n        // On demande si on veut imprimer ou non\n        console.log('Kit sauvegardé. Voulez-vous imprimer ?');\n        this.presentAlertConfirm();\n      },\n        () => {\n          this.saveMoldingErrorAlert();\n        });\n  }\n\n  saveMolding() {\n    return new Promise<void>((resolve, reject) => {\n      this.checkMoldingDatas()\n        .then((moldingDatasStatus) => {\n          console.log('le moulage à le statut : ', moldingDatasStatus);\n          if (moldingDatasStatus) {\n            // sauvegarder le moulage en base de donnée\n            this.molding.moldingUser = this.authService.authUser;\n            if (this.molding.id === null) {\n              this.moldingService.saveMolding(this.moldingService.toIri(this.molding))\n                .then((responseMolding: Molding) => {\n                  this.molding = this.moldingService.moldingServerToMoldingObject(responseMolding);\n                  console.log('tout est OK le moulage est sauvegardé', this.molding);\n                  resolve();\n                },\n                  () => {\n                    console.log('tout n\\'est pas Ok la sauvegarde a échouée');\n                    reject();\n                  });\n            } else {\n              this.moldingService.updateMolding(this.moldingService.toIri(this.molding))\n                .then((responseMolding: Molding) => {\n                  this.molding = responseMolding;\n                  console.log('tout est OK le moulage est mis à jour');\n                  resolve();\n                },\n                  () => {\n                    console.error('tout n\\'est pas Ok la mise à jour du moulage a échouée');\n                    reject();\n                  });\n            }\n          } else {\n            console.error('sauvegarde abandonnée');\n            reject();\n          }\n        });\n    });\n  }\n\n  checkMoldingDatas() {\n    return new Promise<boolean>((resolve, reject) => {\n      if (this.molding.outillage === null) {\n        console.log('le moulage n\\'a pas d\\'outillage associé. Voulez-vous continuer sans outillage ?');\n        this.presentAlertToolMissing()\n          .then((response) => {\n            if (response) {\n              console.log('onResolve : Je veux continuer sans outillage', response);\n              // console.error('erreur', response);\n              resolve(true);\n            } else {\n              console.log('onResolve : Je ne veux pas continuer sans outillage', response);\n              resolve(false);\n            }\n          },\n            (response) => {\n              const message = 'Les données n\\ont pas pu être contrôlées. OU Il n\\'y a pas eu de réponse de l\\'utilisateur';\n              console.log(message, response);\n              reject(message);\n            });\n      } else if (this.molding.kits.length === 0) {\n        console.log('onResolve : Il n\\'y a pas de kit');\n        resolve(false);\n      } else {\n        resolve(true);\n      }\n    });\n\n  }\n\n  async presentAlertConfirm() {\n    const alert = await this.alertController.create({\n      cssClass: 'my-custom-class',\n      header: 'Enregistrement effectué',\n      message: 'Voulez-vous imprimer la fiche ?',\n      buttons: [\n        {\n          text: 'Non',\n          role: 'cancel',\n          cssClass: ['ion-color-primary', 'ion-button'],\n          id: 'cancel-button',\n          handler: () => {\n            console.log('Confirm Cancel: blah');\n          }\n        }, {\n          text: 'Oui',\n          id: 'confirm-button',\n          cssClass: 'ion-color-danger',\n          handler: () => {\n            this.printMolding();\n          },\n        }\n      ]\n    });\n\n    await alert.present();\n  }\n\n  presentAlertToolMissing() {\n    return new Promise<boolean>((resolve, reject) => {\n      this.alertController.create({\n        cssClass: 'my-custom-class',\n        header: 'Alerte',\n        message: 'L\\'outillage de moulage n\\'est pas associé. voulez-vous continuer sans outillage ?',\n        buttons: [\n          {\n            text: 'Non',\n            role: 'cancel',\n            cssClass: ['ion-color-primary', 'ion-button'],\n            id: 'cancel-button',\n            handler: () => {\n              console.log('Response false');\n              resolve(false);\n            }\n          }, {\n            text: 'Oui',\n            id: 'confirm-button',\n            cssClass: 'ion-color-danger',\n            handler: () => {\n              console.log('Response true');\n              resolve(true);\n            },\n          }\n        ]\n      })\n        .then((alert) => {\n          alert.present();\n        });\n    });\n\n  }\n\n  printMolding() {\n    // this.moldingService.molding = this.molding;\n    console.log(this.molding);\n    this.router.navigate(['/printMolding', this.molding.id]);\n  }\n\n  printMoldingClick() {\n    this.saveMolding()\n      .then(() => {\n        this.printMolding();\n      });\n  }\n\n  async wrongKitInputAlert() {\n    const alert = await this.alertController.create({\n      cssClass: 'my-custom-class',\n      header: 'Erreur Kit',\n      subHeader: 'Kit non conforme',\n      message: 'Il semble y avoir un problème avec le kit scanné. Vérifier le kit et essayer de nouveau.',\n      buttons: ['OK']\n    });\n\n    await alert.present();\n\n    const { role } = await alert.onDidDismiss();\n    // console.log('onDidDismiss resolved with role', role);\n  }\n\n  async saveMoldingErrorAlert() {\n    const alert = await this.alertController.create({\n      cssClass: 'my-custom-class',\n      header: 'Erreur de sauvegarde',\n      subHeader: 'Le moulage n\\'a pas été sauvegardé',\n      message: 'Veuillez ré-essayer',\n      buttons: ['OK']\n    });\n\n    await alert.present();\n\n    const { role } = await alert.onDidDismiss();\n    // console.log('onDidDismiss resolved with role', role);\n  }\n\n  async presentToast(message: string) {\n    const toast = await this.toastController.create({\n      message,\n      duration: 2000,\n      position: 'bottom',\n      translucent: true,\n      animated: true,\n    });\n    toast.present();\n  }\n\n  async kitAlertPrompt() {\n    const alert = await this.alertController.create({\n      cssClass: 'my-custom-class',\n      header: 'Scannez un kit',\n      inputs: [\n        {\n          name: 'kitnumber',\n          type: 'text',\n          placeholder: 'Scannez le kit',\n          tabindex: 1,\n          id: 'kitNumberInput',\n        }\n      ],\n      buttons: [\n        {\n          text: 'Annuler',\n          role: 'cancel',\n          cssClass: 'ion-color-secondary',\n          handler: (data) => {\n            console.log('Confirm Cancel', data);\n          }\n        }, {\n          text: 'Valider',\n          cssClass: ['ion-color-primary', 'button', 'button-solid'],\n          handler: (data) => {\n            this.scanInputAction();\n          }\n        }\n      ]\n    });\n\n    await alert.present().then(() => {\n      const toolNumberInput = document.getElementById('toolNumberInput');\n      if (toolNumberInput) {\n        toolNumberInput.focus();\n      }\n    });\n  }\n}\n","export default \"<app-shared-user-header [page]=\\\"pageTitle\\\"></app-shared-user-header>\\n<ion-content>\\n    <ion-toolbar color=light class=\\\"ion-hide-md-down\\\">\\n        <ion-buttons slot=\\\"start\\\" collapse=\\\"true\\\">\\n            <ion-button #scanButton fill=solid size=default (click)=\\\"switchScanState()\\\">\\n                <!-- <ion-icon slot=\\\"start\\\" name=\\\"scan-outline\\\"></ion-icon> -->\\n                {{scanButtonText}}\\n            </ion-button>\\n            <ion-input lines=true #scanInput type=\\\"text\\\" placeholder=\\\"Id du kit\\\" (change)=\\\"scanInputAction()\\\" (focusout)=\\\"inputOnBlur()\\\" (focusin)=\\\"inputOnFocus()\\\"></ion-input>\\n            <ion-button (click)=\\\"associateToolClick()\\\" fill=clear size=default>\\n                <ion-icon slot=\\\"start\\\" name=\\\"link-outline\\\"></ion-icon>\\n                OUTILLAGE\\n            </ion-button>\\n        </ion-buttons>\\n    </ion-toolbar>\\n\\n\\n    <ion-list *ngIf=\\\"molding?.kits\\\">\\n        <ion-item>\\n            <ion-label class=\\\"ion-hide-md-down\\\">Référence Sap</ion-label>\\n            <ion-label>Désignation</ion-label>\\n            <ion-label>Péremption à -18°C</ion-label>\\n            <ion-label>A draper avant le</ion-label>\\n            <ion-label>A cuire avant le</ion-label>\\n        </ion-item>\\n        <ion-item *ngFor=\\\"let kit of molding.kits; let index = index\\\">\\n            <ion-label class=\\\"ion-hide-md-down\\\">{{kit.referenceSAP}} <span *ngIf=\\\"kit === molding.matDrap\\\">(Drap)</span><span *ngIf=\\\"kit === molding.matPolym\\\">(Pol)</span></ion-label>\\n            <ion-label>{{kit.designationSAP}}</ion-label>\\n            <ion-label [color]=\\\"kitService.isPerim(kit.peremptionMoins18, molding.moldingDay) ? 'danger' : 'dark'\\\">{{kit.peremptionMoins18 | date: \\\"dd/MM/yyyy à HH:mm\\\"}}</ion-label>\\n            <ion-label [color]=\\\"kitService.isPerim(kit.aDrapAv, molding.moldingDay) ? 'danger' : 'dark'\\\">{{kit.aDrapAv | date: \\\"dd/MM/yyyy à HH:mm\\\"}}</ion-label>\\n            <ion-label [color]=\\\"kitService.isPerim(kit.aCuirAv, molding.moldingDay) ? 'danger' : 'dark'\\\">{{kit.aCuirAv | date: \\\"dd/MM/yyyy à HH:mm\\\"}}</ion-label>\\n            <ion-button class=\\\"ion-hide-md-down\\\" (click)=\\\"removeKit(index)\\\">\\n                <ion-icon slot=\\\"icon-only\\\" name=\\\"trash-outline\\\"></ion-icon>\\n            </ion-button>\\n        </ion-item>\\n    </ion-list>\\n</ion-content>\\n\\n<ion-tab-bar slot=\\\"bottom\\\" class=\\\"ion-hide-md-up\\\">\\n    <ion-tab-button tab=\\\"schedule\\\">\\n        <ion-icon name=\\\"link\\\"></ion-icon>\\n        <ion-label>Outillage</ion-label>\\n        <ion-badge>6</ion-badge>\\n    </ion-tab-button>\\n\\n    <ion-tab-button tab=\\\"speakers\\\" (click)=\\\"kitAlertPrompt()\\\">\\n        <ion-icon name=\\\"scan\\\"></ion-icon>\\n        <ion-label>Scan kit</ion-label>\\n    </ion-tab-button>\\n\\n    <ion-tab-button tab=\\\"map\\\">\\n        <ion-icon name=\\\"print\\\"></ion-icon>\\n        <ion-label>Imprimer</ion-label>\\n    </ion-tab-button>\\n\\n    <ion-tab-button tab=\\\"about\\\" (click)=\\\"saveMoldingClick()\\\">\\n        <ion-icon name=\\\"save\\\"></ion-icon>\\n        <ion-label>Sauvegarder</ion-label>\\n    </ion-tab-button>\\n</ion-tab-bar>\\n\\n<ion-footer class=\\\"ion-hide-md-down\\\">\\n    <ion-toolbar class=\\\"ion-space-between\\\">\\n        <ion-item lines=\\\"none\\\">\\n            <ion-label>Outillage : {{molding?.outillage?.sapToolNumber}}</ion-label>\\n            <ion-label>A draper avant le : {{molding?.aDraperAv | date: \\\"dd/MM/yyyy à HH:mm\\\"}}</ion-label>\\n            <ion-label>A cuire avant le : {{molding?.aCuireAv | date: \\\"dd/MM/yyyy à HH:mm\\\"}}</ion-label>\\n        </ion-item>\\n    </ion-toolbar>\\n    <ion-toolbar color=light>\\n        <ion-buttons slot=\\\"end\\\" collapse=\\\"true\\\">\\n            <ion-button slot=end (click)=\\\"saveMoldingClick()\\\" fill=\\\"clear\\\">\\n                <ion-icon slot=\\\"start\\\" name=\\\"save-outline\\\"></ion-icon>\\n                SAUVEGARDER\\n            </ion-button>\\n            <ion-button slot=end (click)=\\\"printMoldingClick()\\\" fill=\\\"solid\\\" color=primary>\\n                <ion-icon slot=\\\"start\\\" name=\\\"print-outline\\\"></ion-icon>\\n                IMPRIMER\\n            </ion-button>\\n        </ion-buttons>\\n    </ion-toolbar>\\n\\n</ion-footer>\\n\";","import * as i0 from '@angular/core';\nimport { EventEmitter, Component, Input, Output, ViewChild, NgModule } from '@angular/core';\nimport * as i1 from '@angular/common';\nimport { CommonModule } from '@angular/common';\n\n/**\r\n * Container class for a captured webcam image\r\n * @author basst314, davidshen84\r\n */\r\nclass WebcamImage {\r\n    constructor(imageAsDataUrl, mimeType, imageData) {\r\n        this._mimeType = null;\r\n        this._imageAsBase64 = null;\r\n        this._imageAsDataUrl = null;\r\n        this._imageData = null;\r\n        this._mimeType = mimeType;\r\n        this._imageAsDataUrl = imageAsDataUrl;\r\n        this._imageData = imageData;\r\n    }\r\n    /**\r\n     * Extracts the Base64 data out of the given dataUrl.\r\n     * @param dataUrl the given dataUrl\r\n     * @param mimeType the mimeType of the data\r\n     */\r\n    static getDataFromDataUrl(dataUrl, mimeType) {\r\n        return dataUrl.replace(`data:${mimeType};base64,`, '');\r\n    }\r\n    /**\r\n     * Get the base64 encoded image data\r\n     * @returns base64 data of the image\r\n     */\r\n    get imageAsBase64() {\r\n        return this._imageAsBase64 ? this._imageAsBase64\r\n            : this._imageAsBase64 = WebcamImage.getDataFromDataUrl(this._imageAsDataUrl, this._mimeType);\r\n    }\r\n    /**\r\n     * Get the encoded image as dataUrl\r\n     * @returns the dataUrl of the image\r\n     */\r\n    get imageAsDataUrl() {\r\n        return this._imageAsDataUrl;\r\n    }\r\n    /**\r\n     * Get the ImageData object associated with the canvas' 2d context.\r\n     * @returns the ImageData of the canvas's 2d context.\r\n     */\r\n    get imageData() {\r\n        return this._imageData;\r\n    }\r\n}\n\nclass WebcamUtil {\r\n    /**\r\n     * Lists available videoInput devices\r\n     * @returns a list of media device info.\r\n     */\r\n    static getAvailableVideoInputs() {\r\n        if (!navigator.mediaDevices || !navigator.mediaDevices.enumerateDevices) {\r\n            return Promise.reject('enumerateDevices() not supported.');\r\n        }\r\n        return new Promise((resolve, reject) => {\r\n            navigator.mediaDevices.enumerateDevices()\r\n                .then((devices) => {\r\n                resolve(devices.filter((device) => device.kind === 'videoinput'));\r\n            })\r\n                .catch(err => {\r\n                reject(err.message || err);\r\n            });\r\n        });\r\n    }\r\n}\n\nclass WebcamComponent {\r\n    constructor() {\r\n        /** Defines the max width of the webcam area in px */\r\n        this.width = 640;\r\n        /** Defines the max height of the webcam area in px */\r\n        this.height = 480;\r\n        /** Defines base constraints to apply when requesting video track from UserMedia */\r\n        this.videoOptions = WebcamComponent.DEFAULT_VIDEO_OPTIONS;\r\n        /** Flag to enable/disable camera switch. If enabled, a switch icon will be displayed if multiple cameras were found */\r\n        this.allowCameraSwitch = true;\r\n        /** Flag to control whether an ImageData object is stored into the WebcamImage object. */\r\n        this.captureImageData = false;\r\n        /** The image type to use when capturing snapshots */\r\n        this.imageType = WebcamComponent.DEFAULT_IMAGE_TYPE;\r\n        /** The image quality to use when capturing snapshots (number between 0 and 1) */\r\n        this.imageQuality = WebcamComponent.DEFAULT_IMAGE_QUALITY;\r\n        /** EventEmitter which fires when an image has been captured */\r\n        this.imageCapture = new EventEmitter();\r\n        /** Emits a mediaError if webcam cannot be initialized (e.g. missing user permissions) */\r\n        this.initError = new EventEmitter();\r\n        /** Emits when the webcam video was clicked */\r\n        this.imageClick = new EventEmitter();\r\n        /** Emits the active deviceId after the active video device was switched */\r\n        this.cameraSwitched = new EventEmitter();\r\n        /** available video devices */\r\n        this.availableVideoInputs = [];\r\n        /** Indicates whether the video device is ready to be switched */\r\n        this.videoInitialized = false;\r\n        /** Index of active video in availableVideoInputs */\r\n        this.activeVideoInputIndex = -1;\r\n        /** MediaStream object in use for streaming UserMedia data */\r\n        this.mediaStream = null;\r\n        /** width and height of the active video stream */\r\n        this.activeVideoSettings = null;\r\n    }\r\n    /**\r\n     * If the given Observable emits, an image will be captured and emitted through 'imageCapture' EventEmitter\r\n     */\r\n    set trigger(trigger) {\r\n        if (this.triggerSubscription) {\r\n            this.triggerSubscription.unsubscribe();\r\n        }\r\n        // Subscribe to events from this Observable to take snapshots\r\n        this.triggerSubscription = trigger.subscribe(() => {\r\n            this.takeSnapshot();\r\n        });\r\n    }\r\n    /**\r\n     * If the given Observable emits, the active webcam will be switched to the one indicated by the emitted value.\r\n     * @param switchCamera Indicates which webcam to switch to\r\n     *   true: cycle forwards through available webcams\r\n     *   false: cycle backwards through available webcams\r\n     *   string: activate the webcam with the given id\r\n     */\r\n    set switchCamera(switchCamera) {\r\n        if (this.switchCameraSubscription) {\r\n            this.switchCameraSubscription.unsubscribe();\r\n        }\r\n        // Subscribe to events from this Observable to switch video device\r\n        this.switchCameraSubscription = switchCamera.subscribe((value) => {\r\n            if (typeof value === 'string') {\r\n                // deviceId was specified\r\n                this.switchToVideoInput(value);\r\n            }\r\n            else {\r\n                // direction was specified\r\n                this.rotateVideoInput(value !== false);\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * Get MediaTrackConstraints to request streaming the given device\r\n     * @param deviceId\r\n     * @param baseMediaTrackConstraints base constraints to merge deviceId-constraint into\r\n     * @returns\r\n     */\r\n    static getMediaConstraintsForDevice(deviceId, baseMediaTrackConstraints) {\r\n        const result = baseMediaTrackConstraints ? baseMediaTrackConstraints : this.DEFAULT_VIDEO_OPTIONS;\r\n        if (deviceId) {\r\n            result.deviceId = { exact: deviceId };\r\n        }\r\n        return result;\r\n    }\r\n    /**\r\n     * Tries to harvest the deviceId from the given mediaStreamTrack object.\r\n     * Browsers populate this object differently; this method tries some different approaches\r\n     * to read the id.\r\n     * @param mediaStreamTrack\r\n     * @returns deviceId if found in the mediaStreamTrack\r\n     */\r\n    static getDeviceIdFromMediaStreamTrack(mediaStreamTrack) {\r\n        if (mediaStreamTrack.getSettings && mediaStreamTrack.getSettings() && mediaStreamTrack.getSettings().deviceId) {\r\n            return mediaStreamTrack.getSettings().deviceId;\r\n        }\r\n        else if (mediaStreamTrack.getConstraints && mediaStreamTrack.getConstraints() && mediaStreamTrack.getConstraints().deviceId) {\r\n            const deviceIdObj = mediaStreamTrack.getConstraints().deviceId;\r\n            return WebcamComponent.getValueFromConstrainDOMString(deviceIdObj);\r\n        }\r\n    }\r\n    /**\r\n     * Tries to harvest the facingMode from the given mediaStreamTrack object.\r\n     * Browsers populate this object differently; this method tries some different approaches\r\n     * to read the value.\r\n     * @param mediaStreamTrack\r\n     * @returns facingMode if found in the mediaStreamTrack\r\n     */\r\n    static getFacingModeFromMediaStreamTrack(mediaStreamTrack) {\r\n        if (mediaStreamTrack) {\r\n            if (mediaStreamTrack.getSettings && mediaStreamTrack.getSettings() && mediaStreamTrack.getSettings().facingMode) {\r\n                return mediaStreamTrack.getSettings().facingMode;\r\n            }\r\n            else if (mediaStreamTrack.getConstraints && mediaStreamTrack.getConstraints() && mediaStreamTrack.getConstraints().facingMode) {\r\n                const facingModeConstraint = mediaStreamTrack.getConstraints().facingMode;\r\n                return WebcamComponent.getValueFromConstrainDOMString(facingModeConstraint);\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Determines whether the given mediaStreamTrack claims itself as user facing\r\n     * @param mediaStreamTrack\r\n     */\r\n    static isUserFacing(mediaStreamTrack) {\r\n        const facingMode = WebcamComponent.getFacingModeFromMediaStreamTrack(mediaStreamTrack);\r\n        return facingMode ? 'user' === facingMode.toLowerCase() : false;\r\n    }\r\n    /**\r\n     * Extracts the value from the given ConstrainDOMString\r\n     * @param constrainDOMString\r\n     */\r\n    static getValueFromConstrainDOMString(constrainDOMString) {\r\n        if (constrainDOMString) {\r\n            if (constrainDOMString instanceof String) {\r\n                return String(constrainDOMString);\r\n            }\r\n            else if (Array.isArray(constrainDOMString) && Array(constrainDOMString).length > 0) {\r\n                return String(constrainDOMString[0]);\r\n            }\r\n            else if (typeof constrainDOMString === 'object') {\r\n                if (constrainDOMString['exact']) {\r\n                    return String(constrainDOMString['exact']);\r\n                }\r\n                else if (constrainDOMString['ideal']) {\r\n                    return String(constrainDOMString['ideal']);\r\n                }\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n    ngAfterViewInit() {\r\n        this.detectAvailableDevices()\r\n            .then(() => {\r\n            // start video\r\n            this.switchToVideoInput(null);\r\n        })\r\n            .catch((err) => {\r\n            this.initError.next({ message: err });\r\n            // fallback: still try to load webcam, even if device enumeration failed\r\n            this.switchToVideoInput(null);\r\n        });\r\n    }\r\n    ngOnDestroy() {\r\n        this.stopMediaTracks();\r\n        this.unsubscribeFromSubscriptions();\r\n    }\r\n    /**\r\n     * Takes a snapshot of the current webcam's view and emits the image as an event\r\n     */\r\n    takeSnapshot() {\r\n        // set canvas size to actual video size\r\n        const _video = this.nativeVideoElement;\r\n        const dimensions = { width: this.width, height: this.height };\r\n        if (_video.videoWidth) {\r\n            dimensions.width = _video.videoWidth;\r\n            dimensions.height = _video.videoHeight;\r\n        }\r\n        const _canvas = this.canvas.nativeElement;\r\n        _canvas.width = dimensions.width;\r\n        _canvas.height = dimensions.height;\r\n        // paint snapshot image to canvas\r\n        const context2d = _canvas.getContext('2d');\r\n        context2d.drawImage(_video, 0, 0);\r\n        // read canvas content as image\r\n        const mimeType = this.imageType ? this.imageType : WebcamComponent.DEFAULT_IMAGE_TYPE;\r\n        const quality = this.imageQuality ? this.imageQuality : WebcamComponent.DEFAULT_IMAGE_QUALITY;\r\n        const dataUrl = _canvas.toDataURL(mimeType, quality);\r\n        // get the ImageData object from the canvas' context.\r\n        let imageData = null;\r\n        if (this.captureImageData) {\r\n            imageData = context2d.getImageData(0, 0, _canvas.width, _canvas.height);\r\n        }\r\n        this.imageCapture.next(new WebcamImage(dataUrl, mimeType, imageData));\r\n    }\r\n    /**\r\n     * Switches to the next/previous video device\r\n     * @param forward\r\n     */\r\n    rotateVideoInput(forward) {\r\n        if (this.availableVideoInputs && this.availableVideoInputs.length > 1) {\r\n            const increment = forward ? 1 : (this.availableVideoInputs.length - 1);\r\n            const nextInputIndex = (this.activeVideoInputIndex + increment) % this.availableVideoInputs.length;\r\n            this.switchToVideoInput(this.availableVideoInputs[nextInputIndex].deviceId);\r\n        }\r\n    }\r\n    /**\r\n     * Switches the camera-view to the specified video device\r\n     */\r\n    switchToVideoInput(deviceId) {\r\n        this.videoInitialized = false;\r\n        this.stopMediaTracks();\r\n        this.initWebcam(deviceId, this.videoOptions);\r\n    }\r\n    /**\r\n     * Event-handler for video resize event.\r\n     * Triggers Angular change detection so that new video dimensions get applied\r\n     */\r\n    videoResize() {\r\n        // here to trigger Angular change detection\r\n    }\r\n    get videoWidth() {\r\n        const videoRatio = this.getVideoAspectRatio();\r\n        return Math.min(this.width, this.height * videoRatio);\r\n    }\r\n    get videoHeight() {\r\n        const videoRatio = this.getVideoAspectRatio();\r\n        return Math.min(this.height, this.width / videoRatio);\r\n    }\r\n    get videoStyleClasses() {\r\n        let classes = '';\r\n        if (this.isMirrorImage()) {\r\n            classes += 'mirrored ';\r\n        }\r\n        return classes.trim();\r\n    }\r\n    get nativeVideoElement() {\r\n        return this.video.nativeElement;\r\n    }\r\n    /**\r\n     * Returns the video aspect ratio of the active video stream\r\n     */\r\n    getVideoAspectRatio() {\r\n        // calculate ratio from video element dimensions if present\r\n        const videoElement = this.nativeVideoElement;\r\n        if (videoElement.videoWidth && videoElement.videoWidth > 0 &&\r\n            videoElement.videoHeight && videoElement.videoHeight > 0) {\r\n            return videoElement.videoWidth / videoElement.videoHeight;\r\n        }\r\n        // nothing present - calculate ratio based on width/height params\r\n        return this.width / this.height;\r\n    }\r\n    /**\r\n     * Init webcam live view\r\n     */\r\n    initWebcam(deviceId, userVideoTrackConstraints) {\r\n        const _video = this.nativeVideoElement;\r\n        if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\r\n            // merge deviceId -> userVideoTrackConstraints\r\n            const videoTrackConstraints = WebcamComponent.getMediaConstraintsForDevice(deviceId, userVideoTrackConstraints);\r\n            navigator.mediaDevices.getUserMedia({ video: videoTrackConstraints })\r\n                .then((stream) => {\r\n                this.mediaStream = stream;\r\n                _video.srcObject = stream;\r\n                _video.play();\r\n                this.activeVideoSettings = stream.getVideoTracks()[0].getSettings();\r\n                const activeDeviceId = WebcamComponent.getDeviceIdFromMediaStreamTrack(stream.getVideoTracks()[0]);\r\n                this.cameraSwitched.next(activeDeviceId);\r\n                // Initial detect may run before user gave permissions, returning no deviceIds. This prevents later camera switches. (#47)\r\n                // Run detect once again within getUserMedia callback, to make sure this time we have permissions and get deviceIds.\r\n                this.detectAvailableDevices()\r\n                    .then(() => {\r\n                    this.activeVideoInputIndex = activeDeviceId ? this.availableVideoInputs\r\n                        .findIndex((mediaDeviceInfo) => mediaDeviceInfo.deviceId === activeDeviceId) : -1;\r\n                    this.videoInitialized = true;\r\n                })\r\n                    .catch(() => {\r\n                    this.activeVideoInputIndex = -1;\r\n                    this.videoInitialized = true;\r\n                });\r\n            })\r\n                .catch((err) => {\r\n                this.initError.next({ message: err.message, mediaStreamError: err });\r\n            });\r\n        }\r\n        else {\r\n            this.initError.next({ message: 'Cannot read UserMedia from MediaDevices.' });\r\n        }\r\n    }\r\n    getActiveVideoTrack() {\r\n        return this.mediaStream ? this.mediaStream.getVideoTracks()[0] : null;\r\n    }\r\n    isMirrorImage() {\r\n        if (!this.getActiveVideoTrack()) {\r\n            return false;\r\n        }\r\n        // check for explicit mirror override parameter\r\n        {\r\n            let mirror = 'auto';\r\n            if (this.mirrorImage) {\r\n                if (typeof this.mirrorImage === 'string') {\r\n                    mirror = String(this.mirrorImage).toLowerCase();\r\n                }\r\n                else {\r\n                    // WebcamMirrorProperties\r\n                    if (this.mirrorImage.x) {\r\n                        mirror = this.mirrorImage.x.toLowerCase();\r\n                    }\r\n                }\r\n            }\r\n            switch (mirror) {\r\n                case 'always':\r\n                    return true;\r\n                case 'never':\r\n                    return false;\r\n            }\r\n        }\r\n        // default: enable mirroring if webcam is user facing\r\n        return WebcamComponent.isUserFacing(this.getActiveVideoTrack());\r\n    }\r\n    /**\r\n     * Stops all active media tracks.\r\n     * This prevents the webcam from being indicated as active,\r\n     * even if it is no longer used by this component.\r\n     */\r\n    stopMediaTracks() {\r\n        if (this.mediaStream && this.mediaStream.getTracks) {\r\n            // pause video to prevent mobile browser freezes\r\n            this.nativeVideoElement.pause();\r\n            // getTracks() returns all media tracks (video+audio)\r\n            this.mediaStream.getTracks()\r\n                .forEach((track) => track.stop());\r\n        }\r\n    }\r\n    /**\r\n     * Unsubscribe from all open subscriptions\r\n     */\r\n    unsubscribeFromSubscriptions() {\r\n        if (this.triggerSubscription) {\r\n            this.triggerSubscription.unsubscribe();\r\n        }\r\n        if (this.switchCameraSubscription) {\r\n            this.switchCameraSubscription.unsubscribe();\r\n        }\r\n    }\r\n    /**\r\n     * Reads available input devices\r\n     */\r\n    detectAvailableDevices() {\r\n        return new Promise((resolve, reject) => {\r\n            WebcamUtil.getAvailableVideoInputs()\r\n                .then((devices) => {\r\n                this.availableVideoInputs = devices;\r\n                resolve(devices);\r\n            })\r\n                .catch(err => {\r\n                this.availableVideoInputs = [];\r\n                reject(err);\r\n            });\r\n        });\r\n    }\r\n}\r\nWebcamComponent.DEFAULT_VIDEO_OPTIONS = { facingMode: 'environment' };\r\nWebcamComponent.DEFAULT_IMAGE_TYPE = 'image/jpeg';\r\nWebcamComponent.DEFAULT_IMAGE_QUALITY = 0.92;\r\nWebcamComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.0.0\", ngImport: i0, type: WebcamComponent, deps: [], target: i0.ɵɵFactoryTarget.Component });\r\nWebcamComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"12.0.0\", version: \"13.0.0\", type: WebcamComponent, selector: \"webcam\", inputs: { width: \"width\", height: \"height\", videoOptions: \"videoOptions\", allowCameraSwitch: \"allowCameraSwitch\", mirrorImage: \"mirrorImage\", captureImageData: \"captureImageData\", imageType: \"imageType\", imageQuality: \"imageQuality\", trigger: \"trigger\", switchCamera: \"switchCamera\" }, outputs: { imageCapture: \"imageCapture\", initError: \"initError\", imageClick: \"imageClick\", cameraSwitched: \"cameraSwitched\" }, viewQueries: [{ propertyName: \"video\", first: true, predicate: [\"video\"], descendants: true, static: true }, { propertyName: \"canvas\", first: true, predicate: [\"canvas\"], descendants: true, static: true }], ngImport: i0, template: \"<div class=\\\"webcam-wrapper\\\" (click)=\\\"imageClick.next();\\\">\\r\\n  <video #video [width]=\\\"videoWidth\\\" [height]=\\\"videoHeight\\\" [class]=\\\"videoStyleClasses\\\" autoplay muted playsinline (resize)=\\\"videoResize()\\\"></video>\\r\\n  <div class=\\\"camera-switch\\\" *ngIf=\\\"allowCameraSwitch && availableVideoInputs.length > 1 && videoInitialized\\\" (click)=\\\"rotateVideoInput(true)\\\"></div>\\r\\n  <canvas #canvas [width]=\\\"width\\\" [height]=\\\"height\\\"></canvas>\\r\\n</div>\\r\\n\", styles: [\".webcam-wrapper{display:inline-block;position:relative;line-height:0}.webcam-wrapper video.mirrored{transform:scaleX(-1)}.webcam-wrapper canvas{display:none}.webcam-wrapper .camera-switch{background-color:#0000001a;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAE9UlEQVR42u2aT2hdRRTGf+cRQqghSqihdBFDkRISK2KDfzDWxHaRQHEhaINKqa1gKQhd6EZLN+IidCH+Q0oWIkVRC21BQxXRitVaSbKoJSGtYGoK2tQ/tU1jY5v0c5F54Xl7b/KSO/PyEt+3e5f75p7zzZwzZ74zUEIJJfyfYaEGllQGVAGZlENdBy6Z2cSiYFTSKkkfS/pH/nBF0kFJdUW9AiRVASeAukD8DgNrzOySrwEzng18KaDzALXuG8W3AiStAvqBisBRNg40mtlPxbYCOgvgPO4bncWW+JpVeDQXRQhIygDfA00F5r0XuNfMrgclQFI98DDQCNQA5ZFXqoCWBVp8XwHRHeEqcN7loy/NbHBesyqpQ1KfFj/6nC+ZvFaApFrgPaCZpYVvgCfNbDiRAElNwGFg+RIt/X8H2s2s9wYCJDUAR4HqJX7++RN40MwGpgmQVAH0AQ2BPz4AHHPl8nBOAqtyFWQjsA6oL4Ada81sPDv7uwImod8kvSJp9RyS8O2SXnb/DYVd2Y9VSroQ4ANXJO2WVJmixqh0kzMWwL4LkiqRtDnA4D1zmfE8j9g9AezcnAHaPcfXdbfdnPZ2Yps6+DwAvO/Z1naTdApY7Xng48BDZnY1MpMVQBuw3iXc5Tnb0wBwBPjUzP6eoezuArZ6svM0geJLkvZEYnl3nkntoqROSbckSW2Suj3ZOIangc7GPJuUtNGdFIfmMeavktoSSKiW9LMPw30Q8JqkekmjCbOZRhuclLQjgYSNxUBAj6RyZ9ATgUJpUtJTCSR8vpAEXHAyWK5BXYFIGHOlepSAloUk4NEYgyoknQhEwhFJ0e8h6VSaQeerCb5uZgdi9utxYBNwOUD93hIVXswM4INCi6K9wAszFC2DwLOBDjHbYp59karIUnRdzYy/3ClqVklaUhfwTICj7K25OqA7a4wWagVsm4Me/xzwg2cCqqONFzO7DPxSCAJi436GUBgHHguQD2oTlJ55oSzP9ybccsttSJw1szdjFOSnI/8dTCGZHwcORp4Nx7y3B1iZ8/sm4MW8/Euxg5wIsS/HaAp3zeP4/G7obRDXI4jiTIA22H7Xdc7X+S3A5lC7QBQ357aq3VAjCeSkwUfAJrfvz+R8A9ADLAtZB+TinpjC5JMA+//jwPZZnF8G7J+L8z4IWB/zbG+gIujVWfLBW/NStVMmqaG4POJRsIjix7h8IGnLQuoBbQki5sVAJHyYm7YkNaRRtXwQ8G1cHpX0iKRrgUjYno17Sf0LrQhJUkdCeHWkVITGJI0k1QeS3ikGSUzOyJUJJNznYneuOCnpTldcxa2kP3xJYqOeSDjqZG8ShJLnE8TTuMS6Iyu1BW7djZqkfo9N0QOuYJmYQddfB7RG+gLTNzqAY9FrL+5/nwEbvDdJJe3zzOrhNP3AWRqmk55t3ZcBuj3b2gb0Sbrbo/NNzk7fFzu7s/E5EiC+rrmeQU0Kx2skvRFoOx2ZzlmSdgbsw49JetvtBpk8nM64d/cGbNtJ0s7cGyJlwHeEv+t3nqnLSgPAUOSGyG3AHUxdzqoJbEcvcL+ZTeTeEapzJKxgaeOcc/7Mf06D7kFrguS0VDAMtGadv+E47DT9tcChJej8ISfpD+abgTe45uOkFi8mnQ+JBVQ+d4VXuOptjavcyot8pq86mfwk8LWZnaOEEkoooYQSSojDv8AhQNeGfe0jAAAAAElFTkSuQmCC);background-repeat:no-repeat;border-radius:5px;position:absolute;right:13px;top:10px;height:48px;width:48px;background-size:80%;cursor:pointer;background-position:center;transition:background-color .2s ease}.webcam-wrapper .camera-switch:hover{background-color:#0000002e}\\n\"], directives: [{ type: i1.NgIf, selector: \"[ngIf]\", inputs: [\"ngIf\", \"ngIfThen\", \"ngIfElse\"] }] });\r\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.0.0\", ngImport: i0, type: WebcamComponent, decorators: [{\r\n            type: Component,\r\n            args: [{ selector: 'webcam', template: \"<div class=\\\"webcam-wrapper\\\" (click)=\\\"imageClick.next();\\\">\\r\\n  <video #video [width]=\\\"videoWidth\\\" [height]=\\\"videoHeight\\\" [class]=\\\"videoStyleClasses\\\" autoplay muted playsinline (resize)=\\\"videoResize()\\\"></video>\\r\\n  <div class=\\\"camera-switch\\\" *ngIf=\\\"allowCameraSwitch && availableVideoInputs.length > 1 && videoInitialized\\\" (click)=\\\"rotateVideoInput(true)\\\"></div>\\r\\n  <canvas #canvas [width]=\\\"width\\\" [height]=\\\"height\\\"></canvas>\\r\\n</div>\\r\\n\", styles: [\".webcam-wrapper{display:inline-block;position:relative;line-height:0}.webcam-wrapper video.mirrored{transform:scaleX(-1)}.webcam-wrapper canvas{display:none}.webcam-wrapper .camera-switch{background-color:#0000001a;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAE9UlEQVR42u2aT2hdRRTGf+cRQqghSqihdBFDkRISK2KDfzDWxHaRQHEhaINKqa1gKQhd6EZLN+IidCH+Q0oWIkVRC21BQxXRitVaSbKoJSGtYGoK2tQ/tU1jY5v0c5F54Xl7b/KSO/PyEt+3e5f75p7zzZwzZ74zUEIJJfyfYaEGllQGVAGZlENdBy6Z2cSiYFTSKkkfS/pH/nBF0kFJdUW9AiRVASeAukD8DgNrzOySrwEzng18KaDzALXuG8W3AiStAvqBisBRNg40mtlPxbYCOgvgPO4bncWW+JpVeDQXRQhIygDfA00F5r0XuNfMrgclQFI98DDQCNQA5ZFXqoCWBVp8XwHRHeEqcN7loy/NbHBesyqpQ1KfFj/6nC+ZvFaApFrgPaCZpYVvgCfNbDiRAElNwGFg+RIt/X8H2s2s9wYCJDUAR4HqJX7++RN40MwGpgmQVAH0AQ2BPz4AHHPl8nBOAqtyFWQjsA6oL4Ada81sPDv7uwImod8kvSJp9RyS8O2SXnb/DYVd2Y9VSroQ4ANXJO2WVJmixqh0kzMWwL4LkiqRtDnA4D1zmfE8j9g9AezcnAHaPcfXdbfdnPZ2Yps6+DwAvO/Z1naTdApY7Xng48BDZnY1MpMVQBuw3iXc5Tnb0wBwBPjUzP6eoezuArZ6svM0geJLkvZEYnl3nkntoqROSbckSW2Suj3ZOIangc7GPJuUtNGdFIfmMeavktoSSKiW9LMPw30Q8JqkekmjCbOZRhuclLQjgYSNxUBAj6RyZ9ATgUJpUtJTCSR8vpAEXHAyWK5BXYFIGHOlepSAloUk4NEYgyoknQhEwhFJ0e8h6VSaQeerCb5uZgdi9utxYBNwOUD93hIVXswM4INCi6K9wAszFC2DwLOBDjHbYp59karIUnRdzYy/3ClqVklaUhfwTICj7K25OqA7a4wWagVsm4Me/xzwg2cCqqONFzO7DPxSCAJi436GUBgHHguQD2oTlJ55oSzP9ybccsttSJw1szdjFOSnI/8dTCGZHwcORp4Nx7y3B1iZ8/sm4MW8/Euxg5wIsS/HaAp3zeP4/G7obRDXI4jiTIA22H7Xdc7X+S3A5lC7QBQ357aq3VAjCeSkwUfAJrfvz+R8A9ADLAtZB+TinpjC5JMA+//jwPZZnF8G7J+L8z4IWB/zbG+gIujVWfLBW/NStVMmqaG4POJRsIjix7h8IGnLQuoBbQki5sVAJHyYm7YkNaRRtXwQ8G1cHpX0iKRrgUjYno17Sf0LrQhJUkdCeHWkVITGJI0k1QeS3ikGSUzOyJUJJNznYneuOCnpTldcxa2kP3xJYqOeSDjqZG8ShJLnE8TTuMS6Iyu1BW7djZqkfo9N0QOuYJmYQddfB7RG+gLTNzqAY9FrL+5/nwEbvDdJJe3zzOrhNP3AWRqmk55t3ZcBuj3b2gb0Sbrbo/NNzk7fFzu7s/E5EiC+rrmeQU0Kx2skvRFoOx2ZzlmSdgbsw49JetvtBpk8nM64d/cGbNtJ0s7cGyJlwHeEv+t3nqnLSgPAUOSGyG3AHUxdzqoJbEcvcL+ZTeTeEapzJKxgaeOcc/7Mf06D7kFrguS0VDAMtGadv+E47DT9tcChJej8ISfpD+abgTe45uOkFi8mnQ+JBVQ+d4VXuOptjavcyot8pq86mfwk8LWZnaOEEkoooYQSSojDv8AhQNeGfe0jAAAAAElFTkSuQmCC);background-repeat:no-repeat;border-radius:5px;position:absolute;right:13px;top:10px;height:48px;width:48px;background-size:80%;cursor:pointer;background-position:center;transition:background-color .2s ease}.webcam-wrapper .camera-switch:hover{background-color:#0000002e}\\n\"] }]\r\n        }], propDecorators: { width: [{\r\n                type: Input\r\n            }], height: [{\r\n                type: Input\r\n            }], videoOptions: [{\r\n                type: Input\r\n            }], allowCameraSwitch: [{\r\n                type: Input\r\n            }], mirrorImage: [{\r\n                type: Input\r\n            }], captureImageData: [{\r\n                type: Input\r\n            }], imageType: [{\r\n                type: Input\r\n            }], imageQuality: [{\r\n                type: Input\r\n            }], imageCapture: [{\r\n                type: Output\r\n            }], initError: [{\r\n                type: Output\r\n            }], imageClick: [{\r\n                type: Output\r\n            }], cameraSwitched: [{\r\n                type: Output\r\n            }], video: [{\r\n                type: ViewChild,\r\n                args: ['video', { static: true }]\r\n            }], canvas: [{\r\n                type: ViewChild,\r\n                args: ['canvas', { static: true }]\r\n            }], trigger: [{\r\n                type: Input\r\n            }], switchCamera: [{\r\n                type: Input\r\n            }] } });\n\nconst COMPONENTS = [\r\n    WebcamComponent\r\n];\r\nclass WebcamModule {\r\n}\r\nWebcamModule.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.0.0\", ngImport: i0, type: WebcamModule, deps: [], target: i0.ɵɵFactoryTarget.NgModule });\r\nWebcamModule.ɵmod = i0.ɵɵngDeclareNgModule({ minVersion: \"12.0.0\", version: \"13.0.0\", ngImport: i0, type: WebcamModule, declarations: [WebcamComponent], imports: [CommonModule], exports: [WebcamComponent] });\r\nWebcamModule.ɵinj = i0.ɵɵngDeclareInjector({ minVersion: \"12.0.0\", version: \"13.0.0\", ngImport: i0, type: WebcamModule, imports: [[\r\n            CommonModule\r\n        ]] });\r\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.0.0\", ngImport: i0, type: WebcamModule, decorators: [{\r\n            type: NgModule,\r\n            args: [{\r\n                    imports: [\r\n                        CommonModule\r\n                    ],\r\n                    declarations: [\r\n                        COMPONENTS\r\n                    ],\r\n                    exports: [\r\n                        COMPONENTS\r\n                    ]\r\n                }]\r\n        }] });\n\nclass WebcamInitError {\r\n    constructor() {\r\n        this.message = null;\r\n        this.mediaStreamError = null;\r\n    }\r\n}\n\nclass WebcamMirrorProperties {\r\n}\n\n/**\r\n * Generated bundle index. Do not edit.\r\n */\n\nexport { WebcamComponent, WebcamImage, WebcamInitError, WebcamMirrorProperties, WebcamModule, WebcamUtil };\n"],"names":["i0","EventEmitter","Component","Input","Output","ViewChild","NgModule","i1","CommonModule","WebcamImage","constructor","imageAsDataUrl","mimeType","imageData","_mimeType","_imageAsBase64","_imageAsDataUrl","_imageData","getDataFromDataUrl","dataUrl","replace","imageAsBase64","WebcamUtil","getAvailableVideoInputs","navigator","mediaDevices","enumerateDevices","Promise","reject","resolve","then","devices","filter","device","kind","catch","err","message","WebcamComponent","width","height","videoOptions","DEFAULT_VIDEO_OPTIONS","allowCameraSwitch","captureImageData","imageType","DEFAULT_IMAGE_TYPE","imageQuality","DEFAULT_IMAGE_QUALITY","imageCapture","initError","imageClick","cameraSwitched","availableVideoInputs","videoInitialized","activeVideoInputIndex","mediaStream","activeVideoSettings","trigger","triggerSubscription","unsubscribe","subscribe","takeSnapshot","switchCamera","switchCameraSubscription","value","switchToVideoInput","rotateVideoInput","getMediaConstraintsForDevice","deviceId","baseMediaTrackConstraints","result","exact","getDeviceIdFromMediaStreamTrack","mediaStreamTrack","getSettings","getConstraints","deviceIdObj","getValueFromConstrainDOMString","getFacingModeFromMediaStreamTrack","facingMode","facingModeConstraint","isUserFacing","toLowerCase","constrainDOMString","String","Array","isArray","length","ngAfterViewInit","detectAvailableDevices","next","ngOnDestroy","stopMediaTracks","unsubscribeFromSubscriptions","_video","nativeVideoElement","dimensions","videoWidth","videoHeight","_canvas","canvas","nativeElement","context2d","getContext","drawImage","quality","toDataURL","getImageData","forward","increment","nextInputIndex","initWebcam","videoResize","videoRatio","getVideoAspectRatio","Math","min","videoStyleClasses","classes","isMirrorImage","trim","video","videoElement","userVideoTrackConstraints","getUserMedia","videoTrackConstraints","stream","srcObject","play","getVideoTracks","activeDeviceId","findIndex","mediaDeviceInfo","mediaStreamError","getActiveVideoTrack","mirror","mirrorImage","x","getTracks","pause","forEach","track","stop","ɵfac","ɵcmp","NgIf","type","args","selector","template","styles","static","COMPONENTS","WebcamModule","ɵmod","ɵinj","imports","declarations","exports","WebcamInitError","WebcamMirrorProperties"],"sourceRoot":"webpack:///"}