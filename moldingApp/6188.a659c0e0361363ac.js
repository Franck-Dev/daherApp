"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6188],{6188:(p,a,s)=>{s.d(a,{o:()=>v});var c=s(4522),l=s(8260),i=s(3668),h=s(3521),g=s(5243);let v=(()=>{class n{constructor(o,t,r){this.http=o,this.requestService=t,this.alertService=r}getToolByInput(o){return new Promise((t,r)=>{switch(o.length){case 5:this.getToolByToolNumber(o).then(e=>{t(e)},e=>{this.alertService.simpleAlert("Erreur","Le serveur outillage \xe0 renvoy\xe9 une erreur :",e),r()}).catch(e=>{console.error(e)});break;case 7:break;case 8:o.startsWith("OT")&&this.getToolByToolNumber(o.substring(o.length-5)).then(e=>{t(e)},e=>{this.alertService.simpleAlert("Erreur","Le serveur outillage \xe0 renvoy\xe9 une erreur :",e),r()}).catch(e=>{console.error(e)});break;default:this.getToolByIdentification(o).then(e=>{t(e)},e=>{this.alertService.simpleAlert("Erreur","Le serveur outillage \xe0 renvoy\xe9 une erreur :",e),r()}).catch(e=>{console.error(e)})}})}getToolById(o){return this.requestService.createGetRequest(`${l.N.toolApi}tools/${o}`)}getToolByToolNumber(o){return new Promise((t,r)=>{this.requestService.createGetRequest(`${l.N.toolApi}tools?sapToolNumber=${o}`).then(e=>{1===e.length?t(e[0]):r(e.length>1?"Il y a plus d'un outillage correspondant en base de donn\xe9e":"aucun outillage trouv\xe9")},e=>{console.log(e),r("Pas de r\xe9ponse du serveur")})})}getToolByIdentification(o){return new Promise((t,r)=>{this.requestService.createGetRequest(`${l.N.toolApi}tools?identification=${o}`).then(e=>{1===e.length?t(e[0]):r(e.length>1?"Il y a plus d'un outillage correspondant en base de donn\xe9e":"aucun outillage trouv\xe9")},e=>{console.log(e),r("Pas de r\xe9ponse du serveur")})})}getAllTools(){return new Promise((o,t)=>{const r=(new c.WM).append("content-type","application/json");this.http.get(`${l.N.apiServer}molding_tools`,{headers:r}).subscribe(e=>{o(e)},e=>{console.log(e),t()})})}getIri(o){return`/api/tools/${o.id}`}createTool(o){const t=o;return t.sapToolNumber=parseInt(o.sapToolNumber.substring(2),10),this.requestService.createPostRequest(l.N.toolApi+"tools",t)}}return n.\u0275fac=function(o){return new(o||n)(i.LFG(c.eN),i.LFG(h.s),i.LFG(g.c))},n.\u0275prov=i.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})()}}]);