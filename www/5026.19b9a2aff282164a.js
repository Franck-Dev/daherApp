"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5026],{9922:(f,M,s)=>{s.d(M,{e:()=>S});var l=s(4522),u=s(8260),a=s(865);const P=[{referenceSAP:7172242,designationSAP:"test Kit",idMM:"53454323-1",lotSAP:"",timeOut:12.456,tackLife:123.456,aCuirAv:new Date(2022,1,12),aDrapAv:new Date(2022,1,12),decongel:new Date,peremptionMoins18:new Date(2022,0,12)},{referenceSAP:7172345,designationSAP:"test Kit 2",idMM:"5348949-1",lotSAP:"",timeOut:12.456,tackLife:123.456,aCuirAv:new Date(2022,1,12),aDrapAv:new Date(2022,1,9),decongel:new Date,peremptionMoins18:new Date(2022,2,12)},{referenceSAP:7174567,designationSAP:"test Kit 3",idMM:"5343449-1",lotSAP:"",timeOut:12.456,tackLife:123.456,aCuirAv:new Date(2022,0,31),aDrapAv:new Date(2022,0,28),decongel:new Date,peremptionMoins18:new Date(2022,2,12)},{referenceSAP:7174567,designationSAP:"test Kit 4",idMM:"5379449-1",lotSAP:"",timeOut:12.456,tackLife:123.456,aCuirAv:new Date(2022,0,12),aDrapAv:new Date(2022,0,31),decongel:new Date,peremptionMoins18:new Date(2022,2,12)},{referenceSAP:7174567,designationSAP:"test Kit 5",idMM:"5337249-1",lotSAP:"",timeOut:12.456,tackLife:123.456,aCuirAv:new Date(2022,0,31),aDrapAv:new Date(2022,0,21),decongel:new Date,peremptionMoins18:new Date(2022,1,12)}];let S=(()=>{class c{constructor(r){this.http=r}getKitById(r){return new Promise((d,o)=>{if(u.N.production){const g=(new l.WM).set("content-type","application/json");this.http.get(`${u.N.apiServer}datas_kits?page=1&idMM=${r}`,{headers:g}).subscribe(e=>{if(console.log(e),0!==e.length){const t={id:e[0].id,aCuirAv:e[0].ACuirAv,aDrapAv:e[0].ADrapAv,createdAt:e[0].createdAt,decongel:e[0].Decongel,designationSAP:e[0].DesignationSAP,idMM:e[0].idMM,lotSAP:e[0].LotSAP,peremptionMoins18:e[0].PeremptionMoins18,referenceSAP:e[0].ReferenceSAP,status:e[0].status,tackLife:e[0].TackLife,timeOut:e[0].TimeOut,updateAt:e[0].updateAt};console.log(t),d(t)}else o()},e=>{console.log(e),o()})}else d(P)})}isPerim(r,d){return console.log(r,d),r<d}kitIsInKits(r,d){return!(d.length<=0)&&d.every(o=>o.idMM===r.idMM)}getIri(r){return`/api/datas_kits/${r.id}`}}return c.\u0275fac=function(r){return new(r||c)(a.LFG(l.eN))},c.\u0275prov=a.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})()},6733:(f,M,s)=>{s.d(M,{n:()=>S});var l=s(4522),u=s(8260),a=s(865);let S=(()=>{class c{constructor(r){this.http=r}getToolByToolNumber(r){return new Promise((d,o)=>{const g=(new l.WM).set("content-type","application/json");this.http.get(`${u.N.apiServer}molding_tools?sapToolNumber=${r}`,{headers:g}).subscribe(e=>{if(console.log(e),1===e.length){const t=e[0];console.log(t),d(t)}else e.length>1?console.log("Il y a plus d'un outillage"):o()},e=>{console.log(e),o()})})}getIri(r){return`/api/molding_tools/${r.id}`}}return c.\u0275fac=function(r){return new(r||c)(a.LFG(l.eN))},c.\u0275prov=a.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})()},5026:(f,M,s)=>{s.d(M,{s:()=>d});var l=s(4522),u=s(8260),a=s(865),P=s(9922),S=s(6733);let h=(()=>{class o{constructor(e){this.http=e}getUserById(e){return new Promise((t,n)=>{const p=(new l.WM).set("content-type","application/json");this.http.get(`${u.N.apiServer}users/${e}`,{headers:p,withCredentials:!1}).subscribe(i=>{console.log(i),0!==i.length?t(i):n()},i=>{console.log(i),n()})})}getIri(e){return`/api/users/${e.id}`}}return o.\u0275fac=function(e){return new(e||o)(a.LFG(l.eN))},o.\u0275prov=a.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})(),r=(()=>{class o{constructor(e){this.http=e}createPutRequest(e,t){const n=(new l.WM).append("Content-Type","application/json").append("Accept","application/json");return new Promise((p,i)=>{this.http.put(e,t,{headers:n}).subscribe(A=>{console.log(A),p(A)},A=>{console.error(A),i()})})}createGetRequest(e,t){}}return o.\u0275fac=function(e){return new(e||o)(a.LFG(l.eN))},o.\u0275prov=a.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})(),d=(()=>{class o{constructor(e,t,n,p,i){this.kitService=e,this.moldingToolService=t,this.userService=n,this.requestService=p,this.http=i}saveMolding(e){return console.log(e),new Promise((t,n)=>{const p=(new l.WM).set("content-type","application/json");this.http.post(`${u.N.apiServer}moldings`,e,{headers:p}).subscribe(i=>{console.log(i),t(i)},i=>{console.error(i),n()})})}updateMolding(e){return console.log(e),this.requestService.createPutRequest(`${u.N.apiServer}moldings/${e.id}`,e)}updateDates(e){e.aCuireAv=null,e.aDraperAv=null,e.kits.forEach(t=>{(t.aCuirAv<e.aCuireAv||!e.aCuireAv)&&(e.aCuireAv=t.aCuirAv,e.matPolym=t),(t.aDrapAv<e.aDraperAv||!e.aDraperAv)&&(e.aDraperAv=t.aDrapAv,e.matDrap=t)})}moldingServerToMoldingObject(e){const t=[];return e.kits.forEach(n=>{let p=null;p={aCuirAv:n.ACuirAv,aDrapAv:n.ADrapAv,createdAt:n.createdAt,decongel:n.Decongel,designationSAP:n.DesignationSAP,id:n.id,idMM:n.idMM,lotSAP:n.LotSAP,peremptionMoins18:n.PeremptionMoins18,referenceSAP:n.ReferenceSAP,status:n.status,tackLife:n.TackLife,timeOut:n.TimeOut},t.push(p)}),e.kits=t,e}getMoldingById(e){return new Promise((t,n)=>{const p=(new l.WM).append("content-type","application/json");this.http.get(`${u.N.apiServer}moldings/${e}`,{headers:p}).subscribe(i=>{const A=[];i.kits.forEach(v=>{let m=null;m={aCuirAv:v.ACuirAv,aDrapAv:v.ADrapAv,createdAt:v.createdAt,decongel:v.Decongel,designationSAP:v.DesignationSAP,id:v.id,idMM:v.idMM,lotSAP:v.LotSAP,peremptionMoins18:v.PeremptionMoins18,referenceSAP:v.ReferenceSAP,status:v.status,tackLife:v.TackLife,timeOut:v.TimeOut},A.push(m)}),i.kits=A,console.log(i),t(i)},i=>{console.log(i),n()})})}toIri(e){return{id:e.id,kits:e.kits.map(t=>this.kitService.getIri(t)),moldingDay:e.moldingDay,moldingUser:this.userService.getIri(e.moldingUser),outillage:this.moldingToolService.getIri(e.outillage),aCuireAv:e.aCuireAv,aDraperAv:e.aDraperAv,matPolym:this.kitService.getIri(e.matPolym),matDrap:this.kitService.getIri(e.matDrap)}}}return o.\u0275fac=function(e){return new(e||o)(a.LFG(P.e),a.LFG(S.n),a.LFG(h),a.LFG(r),a.LFG(l.eN))},o.\u0275prov=a.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})()}}]);